function l(e){var n=0,t=e.children,r=t&&t.length;if(!r)n=1;else for(;--r>=0;)n+=t[r].value;e.value=n}function f(){return this.eachAfter(l)}function d(e,n){let t=-1;for(const r of this)e.call(n,r,++t,this);return this}function p(e,n){for(var t=this,r=[t],i,o,h=-1;t=r.pop();)if(e.call(n,t,++h,this),i=t.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function v(e,n){for(var t=this,r=[t],i=[],o,h,u,c=-1;t=r.pop();)if(i.push(t),o=t.children)for(h=0,u=o.length;h<u;++h)r.push(o[h]);for(;t=i.pop();)e.call(n,t,++c,this);return this}function w(e,n){let t=-1;for(const r of this)if(e.call(n,r,++t,this))return r}function g(e){return this.eachAfter(function(n){for(var t=+e(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)t+=r[i].value;n.value=t})}function _(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function y(e){for(var n=this,t=m(n,e),r=[n];n!==t;)n=n.parent,r.push(n);for(var i=r.length;e!==t;)r.splice(i,0,e),e=e.parent;return r}function m(e,n){if(e===n)return e;var t=e.ancestors(),r=n.ancestors(),i=null;for(e=t.pop(),n=r.pop();e===n;)i=e,e=t.pop(),n=r.pop();return i}function A(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function x(){return Array.from(this)}function B(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function k(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n}function*C(){var e=this,n,t=[e],r,i,o;do for(n=t.reverse(),t=[];e=n.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)t.push(r[i]);while(t.length)}function a(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=q)):n===void 0&&(n=j);for(var t=new s(e),r,i=[t],o,h,u,c;r=i.pop();)if((h=n(r.data))&&(c=(h=Array.from(h)).length))for(r.children=h,u=c-1;u>=0;--u)i.push(o=h[u]=new s(h[u])),o.parent=r,o.depth=r.depth+1;return t.eachBefore(E)}function N(){return a(this).eachBefore(D)}function j(e){return e.children}function q(e){return Array.isArray(e)?e[1]:null}function D(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function E(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function s(e){this.data=e,this.depth=this.height=0,this.parent=null}s.prototype=a.prototype={constructor:s,count:f,each:d,eachAfter:v,eachBefore:p,find:w,sum:g,sort:_,path:y,ancestors:A,descendants:x,leaves:B,links:k,copy:N,[Symbol.iterator]:C};function M(e){return e==null?null:H(e)}function H(e){if(typeof e!="function")throw new Error;return e}function S(){return 0}function Z(e){return function(){return e}}export{Z as a,S as c,a as h,M as o,H as r};
