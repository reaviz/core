import{a as j,j as m}from"./jsx-runtime-86dfebf6.js";import{r as y}from"./index-1b03fe98.js";import{C as v}from"./rdk-0beed5d4.js";import{p as te}from"./RadialValueMarker-7b3f8322.js";import{E as re}from"./RadialAxis-6c2bc59c.js";import{e as G,b as ae,D as z,h as ne}from"./schemes-56affe43.js";import{c as le}from"./chroma-699b8ba0.js";import"./DiscreteLegendEntry-49610185.js";import"./SequentialLegend-1647127f.js";import{g as ie}from"./range-163cdb4a.js";import"./index-256d607f.js";import"./Count-a38a1947.js";import{g as se}from"./helper-26bacd48.js";import{u as oe}from"./useHoverIntent-9f4f4ce5.js";import{g as ue}from"./utils-83ce1bd4.js";import{i as de}from"./invert-4b58fa06.js";import{i as O}from"./index-9494de61.js";import{o as ce,c as W,a as fe,h as me}from"./constant-7ff63248.js";const pe=1664525,ye=1013904223,U=4294967296;function he(){let e=1;return()=>(e=(pe*e+ye)%U)/U}function be(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xe(e,r){let t=e.length,a,n;for(;t;)n=r()*t--|0,a=e[t],e[t]=e[n],e[n]=a;return e}function ge(e,r){for(var t=0,a=(e=xe(Array.from(e),r)).length,n=[],l,s;t<a;)l=e[t],s&&Q(s,l)?++t:(s=_e(n=ve(n,l)),t=0);return s}function ve(e,r){var t,a;if(R(r,e))return[r];for(t=0;t<e.length;++t)if(N(r,e[t])&&R(_(e[t],r),e))return[e[t],r];for(t=0;t<e.length-1;++t)for(a=t+1;a<e.length;++a)if(N(_(e[t],e[a]),r)&&N(_(e[t],r),e[a])&&N(_(e[a],r),e[t])&&R(ee(e[t],e[a],r),e))return[e[t],e[a],r];throw new Error}function N(e,r){var t=e.r-r.r,a=r.x-e.x,n=r.y-e.y;return t<0||t*t<a*a+n*n}function Q(e,r){var t=e.r-r.r+Math.max(e.r,r.r,1)*1e-9,a=r.x-e.x,n=r.y-e.y;return t>0&&t*t>a*a+n*n}function R(e,r){for(var t=0;t<r.length;++t)if(!Q(e,r[t]))return!1;return!0}function _e(e){switch(e.length){case 1:return Ce(e[0]);case 2:return _(e[0],e[1]);case 3:return ee(e[0],e[1],e[2])}}function Ce(e){return{x:e.x,y:e.y,r:e.r}}function _(e,r){var t=e.x,a=e.y,n=e.r,l=r.x,s=r.y,u=r.r,i=l-t,o=s-a,d=u-n,c=Math.sqrt(i*i+o*o);return{x:(t+l+i/c*d)/2,y:(a+s+o/c*d)/2,r:(c+n+u)/2}}function ee(e,r,t){var a=e.x,n=e.y,l=e.r,s=r.x,u=r.y,i=r.r,o=t.x,d=t.y,c=t.r,f=a-s,p=a-o,h=n-u,x=n-d,C=i-l,V=c-l,g=a*a+n*n-l*l,q=g-s*s-u*u+i*i,b=g-o*o-d*d+c*c,w=p*h-f*x,P=(h*b-x*q)/(w*2)-a,k=(x*C-h*V)/w,S=(p*q-f*b)/(w*2)-n,E=(f*V-p*C)/w,I=k*k+E*E-1,F=2*(l+P*k+S*E),H=P*P+S*S-l*l,$=-(Math.abs(I)>1e-6?(F+Math.sqrt(F*F-4*I*H))/(2*I):H/F);return{x:a+P+k*$,y:n+S+E*$,r:$}}function X(e,r,t){var a=e.x-r.x,n,l,s=e.y-r.y,u,i,o=a*a+s*s;o?(l=r.r+t.r,l*=l,i=e.r+t.r,i*=i,l>i?(n=(o+i-l)/(2*o),u=Math.sqrt(Math.max(0,i/o-n*n)),t.x=e.x-n*a-u*s,t.y=e.y-n*s+u*a):(n=(o+l-i)/(2*o),u=Math.sqrt(Math.max(0,l/o-n*n)),t.x=r.x+n*a-u*s,t.y=r.y+n*s+u*a)):(t.x=r.x+t.r,t.y=r.y)}function Y(e,r){var t=e.r+r.r-1e-6,a=r.x-e.x,n=r.y-e.y;return t>0&&t*t>a*a+n*n}function Z(e){var r=e._,t=e.next._,a=r.r+t.r,n=(r.x*t.r+t.x*r.r)/a,l=(r.y*t.r+t.y*r.r)/a;return n*n+l*l}function A(e){this._=e,this.next=null,this.previous=null}function Ve(e,r){if(!(l=(e=be(e)).length))return 0;var t,a,n,l,s,u,i,o,d,c,f;if(t=e[0],t.x=0,t.y=0,!(l>1))return t.r;if(a=e[1],t.x=-a.r,a.x=t.r,a.y=0,!(l>2))return t.r+a.r;X(a,t,n=e[2]),t=new A(t),a=new A(a),n=new A(n),t.next=n.previous=a,a.next=t.previous=n,n.next=a.previous=t;e:for(i=3;i<l;++i){X(t._,a._,n=e[i]),n=new A(n),o=a.next,d=t.previous,c=a._.r,f=t._.r;do if(c<=f){if(Y(o._,n._)){a=o,t.next=a,a.previous=t,--i;continue e}c+=o._.r,o=o.next}else{if(Y(d._,n._)){t=d,t.next=a,a.previous=t,--i;continue e}f+=d._.r,d=d.previous}while(o!==d.next);for(n.previous=t,n.next=a,t.next=a.previous=a=n,s=Z(t);(n=n.next)!==a;)(u=Z(n))<s&&(t=n,s=u);a=t.next}for(t=[a._],n=a;(n=n.next)!==a;)t.push(n._);for(n=ge(t,r),i=0;i<l;++i)t=e[i],t.x-=n.x,t.y-=n.y;return n.r}function qe(e){return Math.sqrt(e.value)}function we(){var e=null,r=1,t=1,a=W;function n(l){const s=he();return l.x=r/2,l.y=t/2,e?l.eachBefore(J(e)).eachAfter(B(a,.5,s)).eachBefore(K(1)):l.eachBefore(J(qe)).eachAfter(B(W,1,s)).eachAfter(B(a,l.r/Math.min(r,t),s)).eachBefore(K(Math.min(r,t)/(2*l.r))),l}return n.radius=function(l){return arguments.length?(e=ce(l),n):e},n.size=function(l){return arguments.length?(r=+l[0],t=+l[1],n):[r,t]},n.padding=function(l){return arguments.length?(a=typeof l=="function"?l:fe(+l),n):a},n}function J(e){return function(r){r.children||(r.r=Math.max(0,+e(r)||0))}}function B(e,r,t){return function(a){if(n=a.children){var n,l,s=n.length,u=e(a)*r||0,i;if(u)for(l=0;l<s;++l)n[l].r+=u;if(i=Ve(n,t),u)for(l=0;l<s;++l)n[l].r-=u;a.r=i+u}}}function K(e){return function(r){var t=r.parent;r.r*=e,t&&(r.x=t.x+e*r.x,r.y=t.y+e*r.y)}}const D=({id:e,data:r,fill:t,mask:a,gradient:n,glow:l,onClick:s,onMouseEnter:u,onMouseLeave:i,animated:o,tooltip:d=m(ae,{})})=>{const[c,f]=y.useState(!1),p=y.useRef(null),h=o?z:{type:!1,delay:0},{pointerOut:x,pointerOver:C}=oe({onPointerOver:b=>{f(!0),u==null||u(b)},onPointerOut:b=>{f(!1),i==null||i(b)}}),V=n&&!a?`url(#gradient-${e})`:a?`url(#mask-pattern-${e})`:t,g=y.useMemo(()=>({y:r.data.data,x:r.data.key}),[r]),q=y.useMemo(()=>ie(g),[g]);return j(y.Fragment,{children:[m(G.circle,{id:`${e}-bubble`,ref:p,fill:V,style:ue({glow:l}),initial:{r:r.r,cx:r.x,cy:r.y},animate:{r:r.r,cx:r.x,cy:r.y},transition:h,onClick:b=>s&&s(b,r),onPointerOver:C,onPointerOut:x,tabIndex:0,"aria-label":q,role:"graphics-document"}),a&&j(y.Fragment,{children:[m(te,{id:`mask-${e}`,fill:`url(#gradient-${e})`}),m(v,{element:a,id:`mask-pattern-${e}`,fill:t})]}),n&&m(v,{element:n,id:`gradient-${e}`,color:t}),d&&!d.props.disabled&&m(v,{element:d,visible:!!c,reference:p,value:g})]})};try{D.displayName="Bubble",D.__docgenInfo={description:"",displayName:"Bubble",props:{id:{defaultValue:null,description:"Id set by the parent.",name:"id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"The internal data object built by d3",name:"data",required:!1,type:{name:"HierarchyCircularNode<any>"}},fill:{defaultValue:null,description:"Fill for the bubble.",name:"fill",required:!1,type:{name:"string"}},animated:{defaultValue:null,description:"Whether the chart is animated or not.",name:"animated",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:{value:"<ChartTooltip />"},description:"Tooltip element.",name:"tooltip",required:!1,type:{name:"ReactElement<ChartTooltipProps, FC<Partial<ChartTooltipProps>>>"}},mask:{defaultValue:null,description:"Mask element for the bubble.",name:"mask",required:!1,type:{name:"ReactElement<MaskProps, FC<MaskProps>>"}},glow:{defaultValue:null,description:"Glow styling for the bubble.",name:"glow",required:!1,type:{name:"Glow"}},gradient:{defaultValue:null,description:"Gradient shades for the bubble.",name:"gradient",required:!1,type:{name:"ReactElement<GradientProps, FC<Partial<GradientProps>>>"}},onClick:{defaultValue:null,description:"Event for when the bubble is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<SVGCircleElement, MouseEvent>, currentItem?: HierarchyCircularNode<any>) => void"}},onMouseEnter:{defaultValue:null,description:"Event for when the mouse enters bubble.",name:"onMouseEnter",required:!1,type:{name:"(event: any) => void"}},onMouseLeave:{defaultValue:null,description:"Event for when the mouse leaves the bubble.",name:"onMouseLeave",required:!1,type:{name:"(event: any) => void"}}}}}catch{}const M=({id:e,data:r,format:t,wrap:a,fill:n,fontSize:l,fontFamily:s,animated:u})=>{const i=u?z:{type:!1,delay:0};let o=!1,d;if(t&&(d=t(r),o=y.isValidElement(d)),!o){const c=a?re({key:r.data.key,fontFamily:s,fontSize:l,width:r.r}):r.data.key;return m(G.text,{initial:{x:r.x,y:r.y},animate:{x:r.x,y:r.y},transition:i,id:`${e}-text`,style:{pointerEvents:"none",fontFamily:s,fontSize:l},fill:n,textAnchor:"middle",children:c})}return m("g",{style:{transform:`translate(${r.x}px, ${r.y}px)`},children:d})};M.defaultProps={wrap:!0,fontSize:14,fontFamily:"sans-serif"};try{M.displayName="BubbleLabel",M.__docgenInfo={description:"",displayName:"BubbleLabel",props:{id:{defaultValue:null,description:"Id set by the parent.",name:"id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"The internal data object built by d3",name:"data",required:!1,type:{name:"HierarchyCircularNode<any>"}},fontSize:{defaultValue:{value:"14"},description:"Font size of the text.",name:"fontSize",required:!1,type:{name:"number"}},fontFamily:{defaultValue:{value:"sans-serif"},description:"Font family of the text.",name:"fontFamily",required:!1,type:{name:"string"}},fill:{defaultValue:null,description:"Fill of the text.",name:"fill",required:!1,type:{name:"string"}},wrap:{defaultValue:{value:"true"},description:"Should wrap text or not.",name:"wrap",required:!1,type:{name:"boolean"}},animated:{defaultValue:null,description:"Whether the chart is animated or not.",name:"animated",required:!1,type:{name:"boolean"}},format:{defaultValue:null,description:"Format label.",name:"format",required:!1,type:{name:"(data: any) => any"}}}}}catch{}const T=({id:e,data:r,colorScheme:t,animated:a,bubble:n,format:l,label:s})=>{const u=a?z:{type:!1,delay:0},i=(o,d)=>{const c=se({data:r,colorScheme:t,point:o.data,index:d}),f=c?de(le(c).darken(.5).hex(),!0):"white";return j(G.g,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:u,children:[m(v,{element:l?l(o):n,id:O(`${e}-${o.data.key}-bubble`),animated:a,data:o,fill:c}),m(v,{element:s,id:O(`${e}-${o.data.key}-label`),animated:a,data:o,fill:f})]},o.data.key)};return m(y.Fragment,{children:r.map(i)})};T.defaultProps={colorScheme:"cybertron",animated:!0,bubble:m(D,{}),label:m(M,{})};try{T.displayName="BubbleSeries",T.__docgenInfo={description:"",displayName:"BubbleSeries",props:{id:{defaultValue:null,description:"Id set by the parent.",name:"id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"The internal data object built by d3",name:"data",required:!1,type:{name:"HierarchyCircularNode<any>[]"}},animated:{defaultValue:{value:"true"},description:"Whether the chart is animated or not.",name:"animated",required:!1,type:{name:"boolean"}},colorScheme:{defaultValue:{value:"cybertron"},description:"Color scheme for the chart.",name:"colorScheme",required:!1,type:{name:"ColorSchemeType"}},bubble:{defaultValue:{value:"<Bubble />"},description:"Bubble element.",name:"bubble",required:!1,type:{name:"ReactElement<BubbleProps, FC<Partial<BubbleProps>>>"}},format:{defaultValue:null,description:"Bubble element.",name:"format",required:!1,type:{name:"(item: any) => ReactElement<BubbleProps, FC<Partial<BubbleProps>>>"}},label:{defaultValue:{value:"<BubbleLabel />"},description:"Label element.",name:"label",required:!1,type:{name:"ReactElement<BubbleLabelProps, FC<Partial<BubbleLabelProps>>>"}}}}}catch{}const L=({data:e,id:r,width:t,height:a,className:n,containerClassName:l,margins:s,series:u})=>{const i=y.useCallback((d,c)=>{const f=we().size([d,c]).padding(3),p=me({children:e}).sum(h=>h.data).sort((h,x)=>x.data-h.data);return f(p).leaves()},[e]),o=y.useCallback(({chartWidth:d,chartHeight:c,...f})=>{const p=i(d,c);return m(v,{element:u,id:`${f.id}-series`,data:p})},[u,i]);return m(ne,{id:r,width:t,height:a,containerClassName:l,margins:s,xAxisVisible:!1,yAxisVisible:!1,className:n,children:o})};L.defaultProps={data:[],margins:10,series:m(T,{})};try{L.displayName="BubbleChart",L.__docgenInfo={description:"",displayName:"BubbleChart",props:{data:{defaultValue:{value:"[]"},description:"Data the chart will receive to render.",name:"data",required:!1,type:{name:"ChartShallowDataShape<ChartDataTypes | [ChartDataTypes, ChartDataTypes]>[]"}},series:{defaultValue:{value:"<BubbleSeries />"},description:"The series component that renders the arc components.",name:"series",required:!1,type:{name:"ReactElement<BubbleSeriesProps, FC<Partial<BubbleSeriesProps>>>"}},id:{defaultValue:null,description:"Id of the chart.",name:"id",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"Width of the chart. If not provided will autosize.",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"Height of the chart. If not provided will autosize.",name:"height",required:!1,type:{name:"number"}},margins:{defaultValue:{value:"10"},description:"Margins for the chart.",name:"margins",required:!1,type:{name:"Margins"}},className:{defaultValue:null,description:"Classnames for the chart.",name:"className",required:!1,type:{name:"string"}},containerClassName:{defaultValue:null,description:"Classnames for the chart.",name:"containerClassName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Additional css styles.",name:"style",required:!1,type:{name:"StyleHTMLAttributes<SVGSVGElement>"}},center:{defaultValue:null,description:"Center the chart. Used mainly internally.",name:"center",required:!1,type:{name:"boolean"}},centerX:{defaultValue:null,description:"Center chart on X Axis only. Used mainly internally.",name:"centerX",required:!1,type:{name:"boolean"}},centerY:{defaultValue:null,description:"Center chart on Y Axis only. Used mainly internally.",name:"centerY",required:!1,type:{name:"boolean"}}}}}catch{}export{L as B,T as a,D as b,M as c};
