import{j as T,a as R}from"./jsx-runtime-86dfebf6.js";import{r as q}from"./index-1b03fe98.js";import{e as N,b as O,D,h as A}from"./schemes-56affe43.js";import{C as w}from"./rdk-0beed5d4.js";import{g as E}from"./helper-26bacd48.js";import{E as j,D as z}from"./RadialAxis-6c2bc59c.js";import{g as $}from"./range-163cdb4a.js";import"./index-256d607f.js";import{c as k}from"./chroma-699b8ba0.js";import{u as B}from"./useHoverIntent-9f4f4ce5.js";import"./RadialValueMarker-7b3f8322.js";import"./DiscreteLegendEntry-49610185.js";import"./SequentialLegend-1647127f.js";import"./Count-a38a1947.js";import{i as X}from"./invert-4b58fa06.js";import{r as U,c as M,a as C,h as Y}from"./constant-7ff63248.js";function H(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function W(t,i,p,s,c){for(var o=t.children,r,u=-1,n=o.length,d=t.value&&(s-i)/t.value;++u<n;)r=o[u],r.y0=p,r.y1=c,r.x0=i,r.x1=i+=r.value*d}function G(t,i,p,s,c){for(var o=t.children,r,u=-1,n=o.length,d=t.value&&(c-p)/t.value;++u<n;)r=o[u],r.x0=i,r.x1=s,r.y0=p,r.y1=p+=r.value*d}var K=(1+Math.sqrt(5))/2;function Z(t,i,p,s,c,o){for(var r=[],u=i.children,n,d,a=0,g=0,e=u.length,m,h,f=i.value,l,y,v,V,b,x,_;a<e;){m=c-p,h=o-s;do l=u[g++].value;while(!l&&g<e);for(y=v=l,x=Math.max(h/m,m/h)/(f*t),_=l*l*x,b=Math.max(v/_,_/y);g<e;++g){if(l+=d=u[g].value,d<y&&(y=d),d>v&&(v=d),_=l*l*x,V=Math.max(v/_,_/y),V>b){l-=d;break}b=V}r.push(n={value:l,dice:m<h,children:u.slice(a,g)}),n.dice?W(n,p,s,c,f?s+=h*l/f:o):G(n,p,s,f?p+=m*l/f:c,o),f-=l,a=g}return r}const L=function t(i){function p(s,c,o,r,u){Z(i,s,c,o,r,u)}return p.ratio=function(s){return t((s=+s)>1?s:1)},p}(K);function J(){var t=L,i=!1,p=1,s=1,c=[0],o=M,r=M,u=M,n=M,d=M;function a(e){return e.x0=e.y0=0,e.x1=p,e.y1=s,e.eachBefore(g),c=[0],i&&e.eachBefore(H),e}function g(e){var m=c[e.depth],h=e.x0+m,f=e.y0+m,l=e.x1-m,y=e.y1-m;l<h&&(h=l=(h+l)/2),y<f&&(f=y=(f+y)/2),e.x0=h,e.y0=f,e.x1=l,e.y1=y,e.children&&(m=c[e.depth+1]=o(e)/2,h+=d(e)-m,f+=r(e)-m,l-=u(e)-m,y-=n(e)-m,l<h&&(h=l=(h+l)/2),y<f&&(f=y=(f+y)/2),t(e,h,f,l,y))}return a.round=function(e){return arguments.length?(i=!!e,a):i},a.size=function(e){return arguments.length?(p=+e[0],s=+e[1],a):[p,s]},a.tile=function(e){return arguments.length?(t=U(e),a):t},a.padding=function(e){return arguments.length?a.paddingInner(e).paddingOuter(e):a.paddingInner()},a.paddingInner=function(e){return arguments.length?(o=typeof e=="function"?e:C(+e),a):o},a.paddingOuter=function(e){return arguments.length?a.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):a.paddingTop()},a.paddingTop=function(e){return arguments.length?(r=typeof e=="function"?e:C(+e),a):r},a.paddingRight=function(e){return arguments.length?(u=typeof e=="function"?e:C(+e),a):u},a.paddingBottom=function(e){return arguments.length?(n=typeof e=="function"?e:C(+e),a):n},a.paddingLeft=function(e){return arguments.length?(d=typeof e=="function"?e:C(+e),a):d},a}const I=({id:t,data:i,fill:p,wrap:s,placement:c,fontSize:o,fontFamily:r})=>{const u=i.data.key,n=i.x1-i.x0,d=j({key:u,fontFamily:r,fontSize:o,paddingX:10,wrap:s,paddingY:10,width:n,height:i.y1-i.y0}),a=z(typeof d=="string"?d:u,r,o),g=c==="start"?10:c==="middle"?(n-a.width)/2:n-a.width-10;return T("g",{style:{transform:`translate(${g}px, 15px)`},children:T("text",{id:`${t}-text`,style:{pointerEvents:"none",fontFamily:r,fontSize:o},fill:p,children:d})})};I.defaultProps={fill:"#FFF",wrap:!0,fontSize:14,fontFamily:"sans-serif",placement:"start"};try{I.displayName="TreeMapLabel",I.__docgenInfo={description:"",displayName:"TreeMapLabel",props:{id:{defaultValue:null,description:"Id set by the parent.",name:"id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"The internal data object built by d3",name:"data",required:!1,type:{name:"any"}},fontSize:{defaultValue:{value:"14"},description:"Font size of the text.",name:"fontSize",required:!1,type:{name:"number"}},fontFamily:{defaultValue:{value:"sans-serif"},description:"Font family of the text.",name:"fontFamily",required:!1,type:{name:"string"}},fill:{defaultValue:{value:"#FFF"},description:"Fill of the text.",name:"fill",required:!1,type:{name:"string"}},wrap:{defaultValue:{value:"true"},description:"Should wrap text or not.",name:"wrap",required:!1,type:{name:"boolean"}},placement:{defaultValue:{value:"start"},description:"Placement of the text.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'},{value:'"middle"'}]}}}}}catch{}const S=({data:t,fill:i,animated:p,cursor:s,tooltip:c,onMouseEnter:o,onMouseLeave:r,onClick:u})=>{const[n,d]=q.useState(!1),a=q.useRef(null),g=p?D:{type:!1,delay:0},e=n?k(i).darken(.8).hex():i,{pointerOut:m,pointerOver:h}=B({onPointerOver:v=>{d(!0),o==null||o(v,t)},onPointerOut:v=>{d(!1),r==null||r(v,t)}}),f=q.useMemo(()=>{const v=V=>V.parent?[...v(V.parent),V.data.key]:[];return v(t).join(" â†’ ")},[t]),l=q.useMemo(()=>({y:t.value,x:f}),[t,f]),y=q.useMemo(()=>$(l),[l]);return R(q.Fragment,{children:[T(N.rect,{ref:a,initial:{fill:e,width:t.x1-t.x0,height:t.y1-t.y0},animate:{fill:e,width:t.x1-t.x0,height:t.y1-t.y0},style:{cursor:s},transition:g,onClick:v=>{u==null||u(v,t)},onPointerOver:h,onPointerOut:m,tabIndex:0,"aria-label":y,role:"graphics-document"}),c&&!c.props.disabled&&T(w,{element:c,visible:!!n,reference:a,value:l})]})};S.defaultProps={cursor:"pointer",tooltip:T(O,{})};try{S.displayName="TreeMapRect",S.__docgenInfo={description:"",displayName:"TreeMapRect",props:{data:{defaultValue:null,description:"The internal data object built by d3",name:"data",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"Id set by the parent.",name:"id",required:!1,type:{name:"string"}},fill:{defaultValue:null,description:"Fill for the rect.",name:"fill",required:!1,type:{name:"string"}},animated:{defaultValue:null,description:"Whether the chart is animated or not.",name:"animated",required:!1,type:{name:"boolean"}},cursor:{defaultValue:{value:"pointer"},description:"Cursor for the element.",name:"cursor",required:!1,type:{name:"string"}},tooltip:{defaultValue:{value:"<ChartTooltip />"},description:"Tooltip element.",name:"tooltip",required:!1,type:{name:"ReactElement<ChartTooltipProps, FC<Partial<ChartTooltipProps>>>"}},onClick:{defaultValue:null,description:"Event for when the arc is clicked.",name:"onClick",required:!1,type:{name:"(event: any, data: any) => void"}},onMouseEnter:{defaultValue:null,description:"Event for when the arc has mouse enter.",name:"onMouseEnter",required:!1,type:{name:"(event: any, data: any) => void"}},onMouseLeave:{defaultValue:null,description:"Event for when the arc has mouse leave.",name:"onMouseLeave",required:!1,type:{name:"(event: any, data: any) => void"}}}}}catch{}const P=({id:t,data:i,colorScheme:p,animated:s,rect:c,label:o})=>{const r=s?D:{type:!1,delay:0},u=(n,d)=>{const a=E({data:i,colorScheme:p,point:n.data,index:d}),g=a?X(k(a).darken(.5).hex(),!0):"white";return R(N.g,{initial:{scale:.5,opacity:0,x:n.x0,y:n.y0},animate:{scale:1,opacity:1,x:n.x0,y:n.y0},transition:r,children:[T(w,{element:c,id:`${t}-${n.data.key}-rect`,animated:s,data:n,fill:a}),T(w,{element:o,id:`${t}-${n.data.key}-label`,data:n,fill:g})]},n.data.key)};return T(q.Fragment,{children:i.map((n,d)=>u(n,d))})};P.defaultProps={colorScheme:"cybertron",animated:!0,rect:T(S,{}),label:T(I,{})};try{P.displayName="TreeMapSeries",P.__docgenInfo={description:"",displayName:"TreeMapSeries",props:{id:{defaultValue:null,description:"Id set by the parent.",name:"id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"The internal data object built by d3",name:"data",required:!1,type:{name:"any[]"}},animated:{defaultValue:{value:"true"},description:"Whether the chart is animated or not.",name:"animated",required:!1,type:{name:"boolean"}},colorScheme:{defaultValue:{value:"cybertron"},description:"Color scheme for the chart.",name:"colorScheme",required:!1,type:{name:"ColorSchemeType"}},rect:{defaultValue:{value:"<TreeMapRect />"},description:"Rect element to be rendered.",name:"rect",required:!1,type:{name:"ReactElement<TreeMapRectProps, FC<Partial<TreeMapRectProps>>>"}},label:{defaultValue:{value:"<TreeMapLabel />"},description:"Label element to be rendered.",name:"label",required:!1,type:{name:"ReactElement<TreeMapLabelProps, FC<Partial<TreeMapLabelProps>>>"}}}}}catch{}const F=({data:t,id:i,containerClassName:p,paddingInner:s,paddingTop:c,paddingOuter:o,width:r,height:u,className:n,margins:d,series:a})=>{const g=q.useCallback((m,h)=>{const f=Y({data:t},b=>b.data).sum(b=>b.data).sort((b,x)=>x.data-b.data),y=J().size([m,h]).tile(L).round(!0).paddingInner(s).paddingOuter(o).paddingTop(c)(f),v=[],V=b=>{b!=null&&b.parent&&v.push(b);for(let x of(b==null?void 0:b.children)||[])V(x)};return V(y),v},[t,s,o,c]),e=q.useCallback(({chartWidth:m,chartHeight:h,...f})=>{const l=g(m,h);return T(w,{element:a,...f,id:`${i||f.id}-series`,data:l})},[a,g,i]);return T(A,{id:i,width:r,height:u,containerClassName:p,margins:d,xAxisVisible:!1,yAxisVisible:!1,className:n,children:e})};F.defaultProps={margins:0,paddingInner:5,paddingOuter:5,paddingTop:30,series:T(P,{}),data:[]};try{F.displayName="TreeMap",F.__docgenInfo={description:"",displayName:"TreeMap",props:{data:{defaultValue:{value:"[]"},description:"Data the chart will receive to render.",name:"data",required:!1,type:{name:"ChartNestedDataShape[] | ChartShallowDataShape<ChartDataTypes | [ChartDataTypes, ChartDataTypes]>[]"}},series:{defaultValue:{value:"<TreeMapSeries />"},description:"The series component that renders the components.",name:"series",required:!1,type:{name:"ReactElement<TreeMapSeriesProps, FC<Partial<TreeMapSeriesProps>>>"}},paddingInner:{defaultValue:{value:"5"},description:"Inner padding for the treemap. Defaults to 5.",name:"paddingInner",required:!1,type:{name:"number"}},paddingOuter:{defaultValue:{value:"5"},description:"Outer padding for the treemap. Defaults to 5.",name:"paddingOuter",required:!1,type:{name:"number"}},paddingTop:{defaultValue:{value:"30"},description:`Padding top for the treemap. This is used for the title
spacing in nested situations. Defaults to 30.`,name:"paddingTop",required:!1,type:{name:"number"}},id:{defaultValue:null,description:"Id of the chart.",name:"id",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"Width of the chart. If not provided will autosize.",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"Height of the chart. If not provided will autosize.",name:"height",required:!1,type:{name:"number"}},margins:{defaultValue:{value:"0"},description:"Margins for the chart.",name:"margins",required:!1,type:{name:"Margins"}},className:{defaultValue:null,description:"Classnames for the chart.",name:"className",required:!1,type:{name:"string"}},containerClassName:{defaultValue:null,description:"Classnames for the chart.",name:"containerClassName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Additional css styles.",name:"style",required:!1,type:{name:"StyleHTMLAttributes<SVGSVGElement>"}},center:{defaultValue:null,description:"Center the chart. Used mainly internally.",name:"center",required:!1,type:{name:"boolean"}},centerX:{defaultValue:null,description:"Center chart on X Axis only. Used mainly internally.",name:"centerX",required:!1,type:{name:"boolean"}},centerY:{defaultValue:null,description:"Center chart on Y Axis only. Used mainly internally.",name:"centerY",required:!1,type:{name:"boolean"}}}}}catch{}export{F as T,P as a,I as b,S as c};
