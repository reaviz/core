import{j as w,a as B}from"./jsx-runtime-86dfebf6.js";import{r as _}from"./index-1b03fe98.js";import{h as we,v as ce,e as ie,c as ve,t as Se}from"./schemes-56affe43.js";import{u as Ce,C as F}from"./rdk-0beed5d4.js";import{g as Ne}from"./helper-26bacd48.js";import{c as de}from"./index-256d607f.js";import{f as J}from"./range-163cdb4a.js";import{u as _e}from"./useHoverIntent-9f4f4ce5.js";import"./RadialValueMarker-7b3f8322.js";import"./RadialAxis-6c2bc59c.js";import"./chroma-699b8ba0.js";import"./DiscreteLegendEntry-49610185.js";import"./SequentialLegend-1647127f.js";import"./Count-a38a1947.js";function fe(e,n){let a;if(n===void 0)for(const r of e)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);else{let r=-1;for(let s of e)(s=n(s,++r,e))!=null&&(a<s||a===void 0&&s>=s)&&(a=s)}return a}function Le(e,n){let a;if(n===void 0)for(const r of e)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);else{let r=-1;for(let s of e)(s=n(s,++r,e))!=null&&(a>s||a===void 0&&s>=s)&&(a=s)}return a}function te(e,n){let a=0;if(n===void 0)for(let r of e)(r=+r)&&(a+=r);else{let r=-1;for(let s of e)(s=+n(s,++r,e))&&(a+=s)}return a}function Ee(e){return e.target.depth}function Te(e){return e.depth}function Me(e,n){return n-1-e.height}function Ve(e,n){return e.sourceLinks.length?e.depth:n-1}function Pe(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?Le(e.sourceLinks,Ee)-1:0}function X(e){return function(){return e}}function he(e,n){return Q(e.source,n.source)||e.index-n.index}function pe(e,n){return Q(e.target,n.target)||e.index-n.index}function Q(e,n){return e.y0-n.y0}function ne(e){return e.value}function We(e){return e.index}function $e(e){return e.nodes}function Ae(e){return e.links}function me(e,n){const a=e.get(n);if(!a)throw new Error("missing: "+n);return a}function ye({nodes:e}){for(const n of e){let a=n.y0,r=a;for(const s of n.sourceLinks)s.y0=a+s.width/2,a+=s.width;for(const s of n.targetLinks)s.y1=r+s.width/2,r+=s.width}}function Ie(){let e=0,n=0,a=1,r=1,s=24,m=8,c,d=We,g=Ve,y,b,L=$e,v=Ae,N=6;function h(){const t={nodes:L.apply(null,arguments),links:v.apply(null,arguments)};return x(t),E(t),V(t),q(t),$(t),ye(t),t}h.update=function(t){return ye(t),t},h.nodeId=function(t){return arguments.length?(d=typeof t=="function"?t:X(t),h):d},h.nodeAlign=function(t){return arguments.length?(g=typeof t=="function"?t:X(t),h):g},h.nodeSort=function(t){return arguments.length?(y=t,h):y},h.nodeWidth=function(t){return arguments.length?(s=+t,h):s},h.nodePadding=function(t){return arguments.length?(m=c=+t,h):m},h.nodes=function(t){return arguments.length?(L=typeof t=="function"?t:X(t),h):L},h.links=function(t){return arguments.length?(v=typeof t=="function"?t:X(t),h):v},h.linkSort=function(t){return arguments.length?(b=t,h):b},h.size=function(t){return arguments.length?(e=n=0,a=+t[0],r=+t[1],h):[a-e,r-n]},h.extent=function(t){return arguments.length?(e=+t[0][0],a=+t[1][0],n=+t[0][1],r=+t[1][1],h):[[e,n],[a,r]]},h.iterations=function(t){return arguments.length?(N=+t,h):N};function x({nodes:t,links:l}){for(const[u,i]of t.entries())i.index=u,i.sourceLinks=[],i.targetLinks=[];const o=new Map(t.map((u,i)=>[d(u,i,t),u]));for(const[u,i]of l.entries()){i.index=u;let{source:f,target:S}=i;typeof f!="object"&&(f=i.source=me(o,f)),typeof S!="object"&&(S=i.target=me(o,S)),f.sourceLinks.push(i),S.targetLinks.push(i)}if(b!=null)for(const{sourceLinks:u,targetLinks:i}of t)u.sort(b),i.sort(b)}function E({nodes:t}){for(const l of t)l.value=l.fixedValue===void 0?Math.max(te(l.sourceLinks,ne),te(l.targetLinks,ne)):l.fixedValue}function V({nodes:t}){const l=t.length;let o=new Set(t),u=new Set,i=0;for(;o.size;){for(const f of o){f.depth=i;for(const{target:S}of f.sourceLinks)u.add(S)}if(++i>l)throw new Error("circular link");o=u,u=new Set}}function q({nodes:t}){const l=t.length;let o=new Set(t),u=new Set,i=0;for(;o.size;){for(const f of o){f.height=i;for(const{source:S}of f.targetLinks)u.add(S)}if(++i>l)throw new Error("circular link");o=u,u=new Set}}function M({nodes:t}){const l=fe(t,i=>i.depth)+1,o=(a-e-s)/(l-1),u=new Array(l);for(const i of t){const f=Math.max(0,Math.min(l-1,Math.floor(g.call(null,i,l))));i.layer=f,i.x0=e+f*o,i.x1=i.x0+s,u[f]?u[f].push(i):u[f]=[i]}if(y)for(const i of u)i.sort(y);return u}function T(t){const l=Le(t,o=>(r-n-(o.length-1)*c)/te(o,ne));for(const o of t){let u=n;for(const i of o){i.y0=u,i.y1=u+i.value*l,u=i.y1+c;for(const f of i.sourceLinks)f.width=f.value*l}u=(r-u+c)/(o.length+1);for(let i=0;i<o.length;++i){const f=o[i];f.y0+=u*(i+1),f.y1+=u*(i+1)}j(o)}}function $(t){const l=M(t);c=Math.min(m,(r-n)/(fe(l,o=>o.length)-1)),T(l);for(let o=0;o<N;++o){const u=Math.pow(.99,o),i=Math.max(1-u,(o+1)/N);P(l,u,i),A(l,u,i)}}function A(t,l,o){for(let u=1,i=t.length;u<i;++u){const f=t[u];for(const S of f){let W=0,z=0;for(const{source:D,value:ee}of S.targetLinks){let U=ee*(S.layer-D.layer);W+=p(D,S)*U,z+=U}if(!(z>0))continue;let H=(W/z-S.y0)*l;S.y0+=H,S.y1+=H,R(S)}y===void 0&&f.sort(Q),C(f,o)}}function P(t,l,o){for(let u=t.length,i=u-2;i>=0;--i){const f=t[i];for(const S of f){let W=0,z=0;for(const{target:D,value:ee}of S.sourceLinks){let U=ee*(D.layer-S.layer);W+=k(S,D)*U,z+=U}if(!(z>0))continue;let H=(W/z-S.y0)*l;S.y0+=H,S.y1+=H,R(S)}y===void 0&&f.sort(Q),C(f,o)}}function C(t,l){const o=t.length>>1,u=t[o];O(t,u.y0-c,o-1,l),I(t,u.y1+c,o+1,l),O(t,r,t.length-1,l),I(t,n,0,l)}function I(t,l,o,u){for(;o<t.length;++o){const i=t[o],f=(l-i.y0)*u;f>1e-6&&(i.y0+=f,i.y1+=f),l=i.y1+c}}function O(t,l,o,u){for(;o>=0;--o){const i=t[o],f=(i.y1-l)*u;f>1e-6&&(i.y0-=f,i.y1-=f),l=i.y0-c}}function R({sourceLinks:t,targetLinks:l}){if(b===void 0){for(const{source:{sourceLinks:o}}of l)o.sort(pe);for(const{target:{targetLinks:o}}of t)o.sort(he)}}function j(t){if(b===void 0)for(const{sourceLinks:l,targetLinks:o}of t)l.sort(pe),o.sort(he)}function p(t,l){let o=t.y0-(t.sourceLinks.length-1)*c/2;for(const{target:u,width:i}of t.sourceLinks){if(u===l)break;o+=i+c}for(const{source:u,width:i}of l.targetLinks){if(u===t)break;o-=i}return o}function k(t,l){let o=l.y0-(l.targetLinks.length-1)*c/2;for(const{source:u,width:i}of l.targetLinks){if(u===t)break;o+=i+c}for(const{target:u,width:i}of t.sourceLinks){if(u===l)break;o-=i}return o}return h}var ae=Math.PI,oe=2*ae,G=1e-6,Oe=oe-G;function re(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function qe(){return new re}re.prototype=qe.prototype={constructor:re,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,a,r){this._+="Q"+ +e+","+ +n+","+(this._x1=+a)+","+(this._y1=+r)},bezierCurveTo:function(e,n,a,r,s,m){this._+="C"+ +e+","+ +n+","+ +a+","+ +r+","+(this._x1=+s)+","+(this._y1=+m)},arcTo:function(e,n,a,r,s){e=+e,n=+n,a=+a,r=+r,s=+s;var m=this._x1,c=this._y1,d=a-e,g=r-n,y=m-e,b=c-n,L=y*y+b*b;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(L>G)if(!(Math.abs(b*d-g*y)>G)||!s)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var v=a-m,N=r-c,h=d*d+g*g,x=v*v+N*N,E=Math.sqrt(h),V=Math.sqrt(L),q=s*Math.tan((ae-Math.acos((h+L-x)/(2*E*V)))/2),M=q/V,T=q/E;Math.abs(M-1)>G&&(this._+="L"+(e+M*y)+","+(n+M*b)),this._+="A"+s+","+s+",0,0,"+ +(b*v>y*N)+","+(this._x1=e+T*d)+","+(this._y1=n+T*g)}},arc:function(e,n,a,r,s,m){e=+e,n=+n,a=+a,m=!!m;var c=a*Math.cos(r),d=a*Math.sin(r),g=e+c,y=n+d,b=1^m,L=m?r-s:s-r;if(a<0)throw new Error("negative radius: "+a);this._x1===null?this._+="M"+g+","+y:(Math.abs(this._x1-g)>G||Math.abs(this._y1-y)>G)&&(this._+="L"+g+","+y),a&&(L<0&&(L=L%oe+oe),L>Oe?this._+="A"+a+","+a+",0,1,"+b+","+(e-c)+","+(n-d)+"A"+a+","+a+",0,1,"+b+","+(this._x1=g)+","+(this._y1=y):L>G&&(this._+="A"+a+","+a+",0,"+ +(L>=ae)+","+b+","+(this._x1=e+a*Math.cos(s))+","+(this._y1=n+a*Math.sin(s))))},rect:function(e,n,a,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +a+"v"+ +r+"h"+-a+"Z"},toString:function(){return this._}};function ge(e){return function(){return e}}function Re(e){return e[0]}function ze(e){return e[1]}var je=Array.prototype.slice;function Ge(e){return e.source}function Be(e){return e.target}function He(e){var n=Ge,a=Be,r=Re,s=ze,m=null;function c(){var d,g=je.call(arguments),y=n.apply(this,g),b=a.apply(this,g);if(m||(m=d=qe()),e(m,+r.apply(this,(g[0]=y,g)),+s.apply(this,g),+r.apply(this,(g[0]=b,g)),+s.apply(this,g)),d)return m=null,d+""||null}return c.source=function(d){return arguments.length?(n=d,c):n},c.target=function(d){return arguments.length?(a=d,c):a},c.x=function(d){return arguments.length?(r=typeof d=="function"?d:ge(+d),c):r},c.y=function(d){return arguments.length?(s=typeof d=="function"?d:ge(+d),c):s},c.context=function(d){return arguments.length?(m=d??null,c):m},c}function De(e,n,a,r,s){e.moveTo(n,a),e.bezierCurveTo(n=(n+r)/2,a,n,s,r,s)}function Ue(){return He(De)}function Fe(e){return[e.source.x1,e.y0]}function Xe(e){return[e.target.x0,e.y1]}function be(){return Ue().source(Fe).target(Xe)}const xe="rgba(255, 255, 255, 0.2)",ke=.1,Ye={justify:Ve,center:Pe,left:Te,right:Me},le=({width:e,height:n,margins:a,className:r,animated:s,links:m,justification:c,nodeWidth:d,nodePadding:g,labelPosition:y,nodeSort:b,colorScheme:L,nodes:v,containerClassName:N,...h})=>{const x=Ce(h.id),[E,V]=_.useState([]),[q,M]=_.useState([]),T=_.useCallback((p,k)=>L?Ne({data:v,colorScheme:L,point:v[k],index:k}):p.props.color,[L,v]),$=_.useCallback(p=>{const k=[p],t=[];p.sourceLinks&&(t.push(...p.sourceLinks),p.sourceLinks.forEach(l=>{const o=l.target;o.index!==p.index&&k.push(o)})),p.targetLinks&&(t.push(...p.targetLinks),p.targetLinks.forEach(l=>{const o=l.source;o.index!==p.index&&k.push(o)})),V(k),M(t)},[]),A=_.useCallback(p=>{const k=[p.source,p.target],t=[p];V(k),M(t)},[]),P=_.useCallback(()=>{V([]),M([])},[]),C=_.useMemo(()=>{const p=new Map;return v.forEach(k=>k&&p.set(k.props.title,k)),p},[v]),I=_.useCallback((p,k,t,l)=>{const o=E.some(f=>f.index===p.index),u=E.length>0&&!o;return w(F,{element:l,active:o,animated:s,disabled:u,chartWidth:t,onMouseEnter:()=>$(p),onMouseLeave:()=>P(),labelPosition:y,labelPadding:y==="outside"?ke:0,...p},`node-${k}`)},[E,s,P,$,y]),O=_.useCallback((p,k)=>{const t=q.some(o=>o.index===p.index),l=q.length>0&&!t;return w(F,{element:m[k],active:t,animated:s,chartId:`sankey-${x}`,disabled:l,...p,onMouseEnter:()=>A(p),onMouseLeave:()=>P()},`link-${k}`)},[q,x,s,m,P,A]),R=_.useCallback((p,k)=>{const l=(y==="outside"?ke:0)*p,o=Ie().extent([[1+l,1],[p-l,k]]).nodeWidth(d).nodePadding(g).nodeSort(b).nodeAlign(Ye[c]).nodeId(W=>W.id||W.index),u=v.map((W,z)=>({id:W.props.id,title:W.props.title,color:T(W,z)})),i=m.map(W=>({source:W.props.source,target:W.props.target,value:W.props.value})),{nodes:f,links:S}=o({nodes:u,links:i});return{sankeyNodes:f,sankeyLinks:S}},[T,b,c,m,g,d,v,y]),j=_.useCallback(({id:p,chartWidth:k,chartHeight:t,chartSized:l})=>{if(!l)return null;const{sankeyNodes:o,sankeyLinks:u}=R(k,t);return B(_.Fragment,{children:[u.map((i,f)=>O(i,f)),o.map((i,f)=>I(i,f,k,C.get(i.title)))]},"group")},[R,C,O,I]);return w(we,{id:x,width:e,containerClassName:N,height:n,margins:a,className:r,children:j})};le.defaultProps={animated:!0,justification:"justify",nodeWidth:15,nodePadding:10,nodePosition:"inside"};try{le.displayName="Sankey",le.__docgenInfo={description:"",displayName:"Sankey",props:{animated:{defaultValue:{value:"true"},description:"Whether to animate the enter/update/exit. Set internally by `SankeyNode` and `SankeyLink`.",name:"animated",required:!1,type:{name:"boolean"}},colorScheme:{defaultValue:null,description:"Color scheme for the nodes. Set internally by `SankeyNode`.",name:"colorScheme",required:!1,type:{name:"ColorSchemeType"}},justification:{defaultValue:{value:"justify"},description:"The node alignment method.",name:"justification",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'},{value:'"justify"'}]}},nodeWidth:{defaultValue:{value:"15"},description:"Width of the node.",name:"nodeWidth",required:!1,type:{name:"number"}},nodePadding:{defaultValue:{value:"10"},description:"Vertical padding between nodes in the same column.",name:"nodePadding",required:!1,type:{name:"number"}},labelPosition:{defaultValue:null,description:"Label position.",name:"labelPosition",required:!1,type:{name:"enum",value:[{value:'"inside"'},{value:'"outside"'}]}},nodeSort:{defaultValue:null,description:`Sort function for the nodes.

If sort is specified, sets the node sort method and returns this Sankey generator.
If sort is not specified, returns the current node sort method, which defaults
to undefined, indicating that vertical order of nodes within each column will
be determined automatically by the layout. If sort is null, the order is fixed
by the input. Otherwise, the specified sort function determines the order;
the function is passed two nodes, and must return a value less than 0 if the
first node should be above the second, and a value greater than 0 if the second
node should be above the first, or 0 if the order is not specified.

Reference: https://github.com/d3/d3-sankey#sankey_nodeSort`,name:"nodeSort",required:!1,type:{name:"(a: any, b: any) => number"}},nodes:{defaultValue:null,description:"Nodes that are rendered.",name:"nodes",required:!0,type:{name:"NodeElement[]"}},links:{defaultValue:null,description:"Links that are rendered.",name:"links",required:!0,type:{name:"LinkElement[]"}},id:{defaultValue:null,description:"Id of the chart.",name:"id",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"Width of the chart. If not provided will autosize.",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"Height of the chart. If not provided will autosize.",name:"height",required:!1,type:{name:"number"}},margins:{defaultValue:null,description:"Margins for the chart.",name:"margins",required:!1,type:{name:"Margins"}},className:{defaultValue:null,description:"Classnames for the chart.",name:"className",required:!1,type:{name:"string"}},containerClassName:{defaultValue:null,description:"Classnames for the chart.",name:"containerClassName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Additional css styles.",name:"style",required:!1,type:{name:"StyleHTMLAttributes<SVGSVGElement>"}},center:{defaultValue:null,description:"Center the chart. Used mainly internally.",name:"center",required:!1,type:{name:"boolean"}},centerX:{defaultValue:null,description:"Center chart on X Axis only. Used mainly internally.",name:"centerX",required:!1,type:{name:"boolean"}},centerY:{defaultValue:null,description:"Center chart on Y Axis only. Used mainly internally.",name:"centerY",required:!1,type:{name:"boolean"}}}}}catch{}const Ze="_label_qd893_1",Je={label:Ze},Qe=5,Ke=10,K=({active:e,chartWidth:n,className:a,nodeWidth:r,disabled:s,fill:m,format:c,node:d,position:g,opacity:y,padding:b,visible:L,ellipsis:v,labelPadding:N})=>{const h=(d==null?void 0:d.x0)||0,x=(d==null?void 0:d.x1)||0,E=(d==null?void 0:d.y0)||0,V=(d==null?void 0:d.y1)||0,q=r+Qe,M=n||0,T=h<M/2;let $=T?x+q:h-q;const A=(V+E)/2;let P=T?"start":"end";if(g==="outside"&&(P=T?"end":"start",$=T?x-q:h+q),!L||!d)return null;let C="";if(v==="auto"){const I=T?$:M-$;C=ce(d.title,Math.min(Ke,I/(N*100)))}else v==="none"?C=d.title:C=ce(d.title,v);return w("text",{className:de(Je.label,a),x:$,y:A,dy:"0.35em",textAnchor:P,fill:m,opacity:y(e,s),style:{padding:b},children:typeof c=="function"?c({x:$,y:A,textAnchor:P,node:d}):C})};K.defaultProps={active:!1,fill:"#fff",position:"inside",opacity:(e,n)=>e?1:n?.2:.9,visible:!0,ellipsis:"auto"};try{K.displayName="SankeyLabel",K.__docgenInfo={description:"",displayName:"SankeyLabel",props:{active:{defaultValue:{value:"false"},description:"Whether the element is active or not. Set internally by `Sankey`.",name:"active",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Whether the label is disabled. Set internally by `Sankey`.",name:"disabled",required:!1,type:{name:"boolean"}},chartWidth:{defaultValue:null,description:"Width of the chart. Set internally by `Sankey`.",name:"chartWidth",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"CSS class to apply.",name:"className",required:!1,type:{name:"string"}},fill:{defaultValue:{value:"#fff"},description:"Fill color.",name:"fill",required:!1,type:{name:"string"}},position:{defaultValue:{value:"inside"},description:"Label position. Set internally by `Sankey`.",name:"position",required:!1,type:{name:"enum",value:[{value:'"inside"'},{value:'"outside"'}]}},labelPadding:{defaultValue:null,description:`Percentage of total width occupied by labels on 
either side of the graph inside the container.
Used for auto-ellipsizing labels
Set internally by \`Sankey\`.`,name:"labelPadding",required:!1,type:{name:"number"}},node:{defaultValue:null,description:"Node data. Set internally by `Sankey`.",name:"node",required:!1,type:{name:"NodeExtra & SankeyNodeMinimal<NodeExtra, LinkExtra>"}},opacity:{defaultValue:{value:"(active, disabled) => (active ? 1 : disabled ? 0.2 : 0.9)"},description:"Opacity callback. Used internally by `Sankey`.",name:"opacity",required:!1,type:{name:"(active: boolean, disabled: boolean) => number"}},padding:{defaultValue:null,description:"Padding between the label and the node.",name:"padding",required:!1,type:{name:"string | number"}},visible:{defaultValue:{value:"true"},description:"Whether to show the label or not.",name:"visible",required:!1,type:{name:"boolean"}},nodeWidth:{defaultValue:null,description:"Width of the node set by the 'Sankey'.",name:"nodeWidth",required:!1,type:{name:"number"}},format:{defaultValue:null,description:"Custom formatting for the label.",name:"format",required:!1,type:{name:"(value: SankeyLabelFormatProps) => any"}},ellipsis:{defaultValue:{value:"auto"},description:"Specify the number of characters at which the text would be ellipsized.\nDefaults to 'auto' based on available width and max cut-off at `LABEL_TRUNCATE_LENGTH=10`",name:"ellipsis",required:!1,type:{name:'number | "none" | "auto"'}}}}}catch{}const et="_link_1oi50_1",tt="_tooltip_1oi50_7",nt="_tooltipLabel_1oi50_11",it="_tooltipValue_1oi50_18",Y={link:et,tooltip:tt,tooltipLabel:nt,tooltipValue:it},se=({gradient:e,index:n,source:a,target:r,tooltip:s,chartId:m,value:c,active:d,className:g,disabled:y,opacity:b,style:L,width:v,color:N,y0:h,y1:x,onClick:E,onMouseEnter:V,onMouseLeave:q})=>{var l;const M=a,T=r,[$,A]=_.useState(!1),P=_.useRef(null),C=_.useCallback(()=>({index:n,y0:h,y1:x,value:c,width:v,source:a,target:r}),[n,a,r,c,v,h,x]),I=_.useMemo(()=>e?`url(#${m}-gradient-${n})`:N||xe,[m,e,n,N]),O=_.useMemo(()=>{const u=be()(C()),i=Math.max(1,v);return{d:u,strokeWidth:i}},[C,v]),R=_.useMemo(()=>({d:be()({...C(),width:0}),strokeWidth:0}),[C]),j=_.useCallback(()=>B("div",{className:Y.tooltip,children:[w("div",{className:Y.tooltipLabel,children:`${a.title} → ${r.title}`}),w("div",{className:Y.tooltipValue,children:J(c)})]}),[a,r,c]),{pointerOut:p,pointerOver:k}=_e({onPointerOver:o=>{A(!0),V==null||V(o)},onPointerOut:o=>{A(!1),q==null||q(o)}}),t=_.useMemo(()=>`${a.title} → ${r.title}: ${J(c)}`,[a,r,c]);return B(_.Fragment,{children:[e&&B("linearGradient",{id:`${m}-gradient-${n}`,gradientUnits:"userSpaceOnUse",x1:M.x1,x2:T.x0,children:[w("stop",{offset:"0%",stopColor:M.color}),w("stop",{offset:"100%",stopColor:T.color})]}),w("g",{ref:P,children:w(ie.path,{className:de(Y.link,g),style:L,initial:R,animate:O,exit:R,transition:{duration:.5},stroke:I,strokeOpacity:b(d,y),onClick:E,onPointerOver:k,onPointerOut:p,"aria-label":t,role:"graphics-document"},`sankey-link-${O.d}-${n}`)}),!((l=s==null?void 0:s.props)!=null&&l.disabled)&&w(F,{content:j,element:s,visible:$,reference:P})]})};se.defaultProps={active:!1,animated:!0,disabled:!1,gradient:!0,opacity:(e,n)=>e?.5:n?.1:.35,tooltip:w(ve,{theme:Se,followCursor:!0,modifiers:{offset:{offset:"0, 5px"}}}),width:0};try{se.displayName="SankeyLink",se.__docgenInfo={description:"",displayName:"SankeyLink",props:{color:{defaultValue:null,description:"Color of the link.",name:"color",required:!1,type:{name:"string"}},active:{defaultValue:{value:"false"},description:"Whether the element is active or not. Set internally by `Sankey`.",name:"active",required:!1,type:{name:"boolean"}},animated:{defaultValue:{value:"true"},description:"Whether to animate the enter/update/exit.",name:"animated",required:!1,type:{name:"boolean"}},chartId:{defaultValue:null,description:"Id of Sankey chart. Set internally by `Sankey`.",name:"chartId",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"CSS class to apply.",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the node is disabled. Set internally by `Sankey`.",name:"disabled",required:!1,type:{name:"boolean"}},gradient:{defaultValue:{value:"true"},description:"Whether to use gradient or not.",name:"gradient",required:!1,type:{name:"boolean"}},opacity:{defaultValue:{value:"(active, disabled) => (active ? 0.5 : disabled ? 0.1 : 0.35)"},description:"Opacity callback for the link.",name:"opacity",required:!1,type:{name:"(active: boolean, disabled: boolean) => number"}},style:{defaultValue:null,description:"CSS styles to apply.",name:"style",required:!1,type:{name:"object"}},tooltip:{defaultValue:{value:`(
    <Tooltip
      theme={tooltipTheme}
      followCursor={true}
      modifiers={{
        offset: {
          offset: '0, 5px'
        }
      }}
    />
  )`},description:"Tooltip element.",name:"tooltip",required:!1,type:{name:"ReactElement<TooltipProps, FC<Partial<TooltipProps>>>"}},width:{defaultValue:{value:"0"},description:"Width of the link. Set internally by `Sankey`.",name:"width",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"Event for when the link is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<SVGPathElement, MouseEvent>) => void"}},onMouseEnter:{defaultValue:null,description:"Event for when the link has mouse enter.",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<SVGPathElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Event for when the link has mouse leave.",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<SVGPathElement, MouseEvent>) => void"}}}}}catch{}const at="_node_oqk6h_1",ot="_tooltip_oqk6h_5",rt="_tooltipLabel_oqk6h_10",lt="_tooltipValue_oqk6h_17",Z={node:at,tooltip:ot,tooltipLabel:rt,tooltipValue:lt},ue=({active:e,chartWidth:n,label:a,labelPosition:r,labelPadding:s,tooltip:m,title:c,value:d,className:g,color:y,disabled:b,index:L,opacity:v,style:N,width:h,x0:x,x1:E,y0:V,y1:q,id:M,sourceLinks:T,targetLinks:$,onClick:A,onMouseEnter:P,onMouseLeave:C})=>{var i;const I={id:M,title:c,color:y,sourceLinks:T,targetLinks:$,value:d,index:L,x0:x,x1:E,y0:V,y1:q},O=h||(E&&x&&E-x>0?E-x:0),R=q&&V&&q-V>0?q-V:0,[j,p]=_.useState(!1),k=_.useRef(null),t=_.useCallback(()=>B("div",{className:Z.tooltip,children:[w("div",{className:Z.tooltipLabel,children:c}),w("div",{className:Z.tooltipValue,children:J(d)})]}),[c,d]),{pointerOut:l,pointerOver:o}=_e({onPointerOver:f=>{p(!0),P==null||P(f)},onPointerOut:f=>{p(!1),C==null||C(f)}}),u=_.useMemo(()=>`${c}: ${J(d)}`,[c,d]);return B(_.Fragment,{children:[w(ie.g,{ref:k,tabIndex:0,"aria-label":u,role:"graphics-document",children:w(ie.rect,{className:de(Z.node,g),fillOpacity:v(e,b),style:N,width:O,height:R,fill:y,initial:{opacity:0,attrX:x,attrY:V},animate:{opacity:1,attrX:x,attrY:V},exit:{opacity:0,attrX:x,attrY:V},transition:{duration:.1},onClick:A,onPointerOver:o,onPointerOut:l},`sankey-node-${x}-${E}-${V}-${q}-${L}`)}),a!==null&&w(F,{active:e,element:a,disabled:b,chartWidth:n,nodeWidth:O,node:I,position:r,labelPadding:s}),!((i=m==null?void 0:m.props)!=null&&i.disabled)&&w(F,{content:t,element:m,visible:j,reference:k})]})};ue.defaultProps={active:!1,animated:!0,color:xe,disabled:!1,label:w(K,{}),opacity:(e,n)=>e?1:n?.2:.9,tooltip:w(ve,{theme:Se,followCursor:!0,modifiers:{offset:{offset:"0, 5px"}}})};try{ue.displayName="SankeyNode",ue.__docgenInfo={description:"",displayName:"SankeyNode",props:{id:{defaultValue:null,description:"ID of the node. If not provided, the node's index will be used.",name:"id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Title of the node.",name:"title",required:!1,type:{name:"string"}},color:{defaultValue:{value:"rgba(255, 255, 255, 0.2)"},description:"Color of the node.",name:"color",required:!1,type:{name:"string"}},active:{defaultValue:{value:"false"},description:"Whether the element is active or not. Set internally by `Sankey`.",name:"active",required:!1,type:{name:"boolean"}},animated:{defaultValue:{value:"true"},description:"Whether to animate the enter/update/exit.",name:"animated",required:!1,type:{name:"boolean"}},chartWidth:{defaultValue:null,description:"Width of the chart. Set internally by `Sankey`.",name:"chartWidth",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"CSS class to apply.",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the node is disabled. Set internally by `Sankey`.",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:{value:"<SankeyLabel />"},description:"Label element.",name:"label",required:!1,type:{name:"ReactElement<SankeyLabelProps, FC<Partial<SankeyLabelProps>>>"}},labelPosition:{defaultValue:null,description:"Label position. Set internally by `Sankey`.",name:"labelPosition",required:!1,type:{name:"enum",value:[{value:'"inside"'},{value:'"outside"'}]}},labelPadding:{defaultValue:null,description:"Percentage of total width occupied by labels on\neither side of the graph inside the container.\nSet internally by `Sankey`.",name:"labelPadding",required:!1,type:{name:"number"}},opacity:{defaultValue:{value:"(active, disabled) => (active ? 1 : disabled ? 0.2 : 0.9)"},description:"Opacity callback for the node.",name:"opacity",required:!1,type:{name:"(active: boolean, disabled: boolean) => number"}},style:{defaultValue:null,description:"CSS styles to apply.",name:"style",required:!1,type:{name:"StyleHTMLAttributes<SVGRectElement>"}},tooltip:{defaultValue:{value:`(
    <Tooltip
      theme={tooltipTheme}
      followCursor={true}
      modifiers={{
        offset: {
          offset: '0, 5px'
        }
      }}
    />
  )`},description:"Tooltip element.",name:"tooltip",required:!1,type:{name:"ReactElement<TooltipProps, FC<Partial<TooltipProps>>>"}},width:{defaultValue:null,description:"Width of the node. Set internally by `Sankey`.",name:"width",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"Event for when the node is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<SVGRectElement, MouseEvent>) => void"}},onMouseEnter:{defaultValue:null,description:"Event for when the node has mouse enter.",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<SVGRectElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Event for when the node has mouse leave.",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<SVGRectElement, MouseEvent>) => void"}}}}}catch{}export{le as S,se as a,ue as b,K as c};
