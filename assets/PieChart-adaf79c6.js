import{a as S,j as y,F as E}from"./jsx-runtime-86dfebf6.js";import{r as A}from"./index-1b03fe98.js";import{c as W}from"./index-256d607f.js";import{C as M,u as j}from"./rdk-0beed5d4.js";import{u as z,k as U,D as G,e as k,b as H,m as B,h as X}from"./schemes-56affe43.js";import{c as K}from"./chroma-699b8ba0.js";import{c as x,t as I,b as Y,A as J,B as w}from"./RadialAxis-6c2bc59c.js";import{u as Q}from"./useHoverIntent-9f4f4ce5.js";import"./RadialValueMarker-7b3f8322.js";import"./DiscreteLegendEntry-49610185.js";import"./SequentialLegend-1647127f.js";import{g as Z,f as ee}from"./range-163cdb4a.js";import"./Count-a38a1947.js";import{g as ae}from"./helper-26bacd48.js";import{i as te}from"./index-9494de61.js";function ne(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function re(e){return e}function ie(){var e=re,t=ne,i=null,o=x(0),l=x(I),u=x(0);function n(a){var r,d=(a=Y(a)).length,s,m,f=0,c=new Array(d),p=new Array(d),h=+o.apply(this,arguments),g=Math.min(I,Math.max(-I,l.apply(this,arguments)-h)),P,V=Math.min(Math.abs(g)/d,u.apply(this,arguments)),q=V*(g<0?-1:1),b;for(r=0;r<d;++r)(b=p[c[r]=r]=+e(a[r],r,a))>0&&(f+=b);for(t!=null?c.sort(function(C,v){return t(p[C],p[v])}):i!=null&&c.sort(function(C,v){return i(a[C],a[v])}),r=0,m=f?(g-d*q)/f:0;r<d;++r,h=P)s=c[r],b=p[s],P=h+(b>0?b*m:0)+q,p[s]={data:a[s],index:r,value:b,startAngle:h,endAngle:P,padAngle:V};return p}return n.value=function(a){return arguments.length?(e=typeof a=="function"?a:x(+a),n):e},n.sortValues=function(a){return arguments.length?(t=a,i=null,n):t},n.sort=function(a){return arguments.length?(i=a,t=null,n):i},n.startAngle=function(a){return arguments.length?(o=typeof a=="function"?a:x(+a),n):o},n.endAngle=function(a){return arguments.length?(l=typeof a=="function"?a:x(+a),n):l},n.padAngle=function(a){return arguments.length?(u=typeof a=="function"?a:x(+a),n):u},n}const le=({data:e,animated:t,arc:i})=>{const o=A.useMemo(()=>{const a=e.startAngle,r=t?a:e.endAngle;return{...e,startAngle:a,endAngle:r}},[e,t]),l=A.useRef(o),u=z(o),n=U(0,G);return A.useEffect(()=>{const a=J(l.current,e),r=n.get();return n.set(r+1),n.on("change",d=>{const s=a(d-r);l.current=s,u.set(i(s))})},[i,u,e,o,n]),u},_=({id:e,color:t,data:i,arc:o,cursor:l,animated:u,gradient:n,disabled:a,onClick:r,onMouseEnter:d,onMouseLeave:s,tooltip:m})=>{var v;const f=A.useRef(null),c=le({animated:u,arc:o,data:i}),[p,h]=A.useState(!1),g=A.useMemo(()=>p?K(t).brighten(.5):t,[t,p]),{pointerOut:P,pointerOver:V}=Q({onPointerOver:R=>{a||(h(!0),d==null||d({value:i.data,nativeEvent:R}))},onPointerOut:R=>{a||(h(!1),s==null||s({value:i.data,nativeEvent:R}))}}),q=A.useMemo(()=>n?`url(#gradient-${e})`:t,[n,e,t]),b=A.useMemo(()=>({y:i.data.data,x:i.data.key}),[i]),C=A.useMemo(()=>Z(b),[b]);return S("g",{ref:f,tabIndex:0,"aria-label":C,role:"graphics-document",children:[y(k.path,{role:"graphics-symbol",d:c,style:{cursor:l},fill:q,onPointerOver:V,onPointerOut:P,onClick:R=>{a||r==null||r({value:i.data,nativeEvent:R})}}),n&&y(M,{element:n,id:`gradient-${e}`,direction:"horizontal",color:g}),!((v=m==null?void 0:m.props)!=null&&v.disabled)&&y(M,{element:m,visible:!!p,reference:f,value:b})]})};_.defaultProps={cursor:"initial",animated:!0,disabled:!1,tooltip:y(H,{})};try{_.displayName="PieArc",_.__docgenInfo={description:"",displayName:"PieArc",props:{id:{defaultValue:null,description:"Unique id for arc",name:"id",required:!1,type:{name:"string"}},arc:{defaultValue:null,description:`The arc generator function returning an arc path
@param data`,name:"arc",required:!1,type:{name:"(data: ArcData) => string"}},data:{defaultValue:null,description:"Data is the datum passed to the arc generator function",name:"data",required:!1,type:{name:"ArcData"}},color:{defaultValue:null,description:"Color",name:"color",required:!1,type:{name:"string"}},animated:{defaultValue:{value:"true"},description:"Animate",name:"animated",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:{value:"<ChartTooltip />"},description:"Tooltip component",name:"tooltip",required:!1,type:{name:"ReactElement<ChartTooltipProps, FC<Partial<ChartTooltipProps>>>"}},cursor:{defaultValue:{value:"initial"},description:"The cursor type used when hovering",name:"cursor",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Disable the arc",name:"disabled",required:!1,type:{name:"boolean"}},gradient:{defaultValue:null,description:"Gradient shades for the bar.",name:"gradient",required:!1,type:{name:"ReactElement<GradientProps, FC<Partial<GradientProps>>>"}},onClick:{defaultValue:null,description:`OnClick event handler
@param e Click event`,name:"onClick",required:!1,type:{name:"(e: PieArcMouseEvent) => void"}},onMouseEnter:{defaultValue:null,description:`MouseEnter event handler
@param e MouseEnter event`,name:"onMouseEnter",required:!1,type:{name:"(e: PieArcMouseEvent) => void"}},onMouseLeave:{defaultValue:null,description:`MouseLeave event handler
@param e MouseLeave event`,name:"onMouseLeave",required:!1,type:{name:"(e: PieArcMouseEvent) => void"}}}}}catch{}function se([e,t],[i,o]){let l=[0,0];if((o-t)*Math.sign(t)>=0){let n=Math.abs(o/t)||1;const a=1,r=Math.abs(i/e)||1;n=Math.max(Math.min(r,n),a),l=[e*n,o]}else{let n=.85;const a=Math.abs(e/i)||1;n=Math.max(Math.min(1,n),a),l=[i*n,t]}return l}const oe=({startAngle:e,endAngle:t})=>e+(t-e)/2<Math.PI?"start":"end",F=({centroid:e,data:t,lineStroke:i,padding:o,fontSize:l,fontFill:u,format:n,fontFamily:a,position:r,outerRadius:d,width:s,height:m})=>{const f=oe(t),c=n?n({...t.data,textAnchor:f}):ee(t.data.key),[p,h]=r,g=d+4,P=e(t),V=w().innerRadius(g).outerRadius(g).centroid(t),q=se(V,r);return S(k.g,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},children:[typeof c=="string"?S(E,{children:[y("title",{children:c}),y("text",{dy:o,fill:u,fontSize:l,fontFamily:a,textAnchor:f,style:{shapeRendering:"crispEdges",transform:`translate3d(${p}px,${h}px, 0)`},children:c})]}):y("foreignObject",{width:s,height:m,style:{transform:`translate3d(${f==="start"?p:p-s}px,${h-m/2}px, 0)`,color:u,fontFamily:a,fontSize:l},children:c}),y("polyline",{fill:"none",stroke:i,points:`${P},${V},${q},${r}`})]})};F.defaultProps={format:void 0,lineStroke:"rgba(127,127,127,0.5)",fontFill:"#8F979F",fontSize:11,fontFamily:"sans-serif",padding:".35em",height:11};try{F.displayName="PieArcLabel",F.__docgenInfo={description:"",displayName:"PieArcLabel",props:{data:{defaultValue:null,description:"Data set by the parent component",name:"data",required:!1,type:{name:"ArcData"}},centroid:{defaultValue:null,description:"A function returning the centroid of the corresponding `PieArc`\n@param d PieArcDatum",name:"centroid",required:!1,type:{name:"(d: ArcData) => [number, number]"}},format:{defaultValue:{value:"undefined"},description:`A Formatting function for the label value
@param v The label value`,name:"format",required:!1,type:{name:"(v: any) => ReactNode"}},fontFill:{defaultValue:{value:"#8F979F"},description:"FontFill color",name:"fontFill",required:!1,type:{name:"string"}},fontSize:{defaultValue:{value:"11"},description:"FontSize",name:"fontSize",required:!1,type:{name:"number"}},fontFamily:{defaultValue:{value:"sans-serif"},description:"FontFamily",name:"fontFamily",required:!1,type:{name:"string"}},lineStroke:{defaultValue:{value:"rgba(127,127,127,0.5)"},description:"Line stroke of the label connector",name:"lineStroke",required:!1,type:{name:"string"}},outerRadius:{defaultValue:null,description:"Outer radius of the corresponding `PieArc`",name:"outerRadius",required:!1,type:{name:"number"}},padding:{defaultValue:{value:".35em"},description:"y Padding of the label",name:"padding",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"The label position set by the parent component",name:"position",required:!1,type:{name:"[number, number]"}},width:{defaultValue:null,description:"Width of the label",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"11"},description:"Height of the label",name:"height",required:!1,type:{name:"number"}}}}}catch{}const N=1.2,ue=e=>e.startAngle+(e.endAngle-e.startAngle)/2,de=e=>e.endAngle-e.startAngle>Math.PI/30;function ce(e,t){return e||de(t)}function O(e,t,i,o){if(!o||t===void 0)return e;const l=B(t,u=>u.value);return e*i.value/l}function pe(e,t,i,o){return l=>{const u=O(i,e,l,o);return w().innerRadius(t).outerRadius(u).centroid(l)}}function me(e,t,i,o,l){const u=Math.min(t,e);let n=u/2,a=0;if(i)if(a=i.props.width,a){const d=t/2-a;n=Math.min(d/N,e/2)}else n=u/3,a=t/2-n*N;const r=l?n*(1-o):0;return{outerRadius:n,innerRadius:r,labelWidth:a}}function fe(e,t,i,o,l,u,n){return a=>{const r=O(i,e,a,n);return w().innerRadius(t).outerRadius(r).cornerRadius(o).padRadius(u).padAngle(l)(a)}}function he(e,t,i,o,l,u,n){const a=t*N,r=w().innerRadius(a).outerRadius(a).cornerRadius(o).padAngle(l).padRadius(u),d=e.map(s=>{if(!ce(n,s))return null;const m=r.centroid(s);return m[0]=a*(ue(s)<Math.PI?1:-1),m});for(let s=0;s<e.length-1;s++){if(!d[s])continue;const[m,f]=d[s];for(let c=s+1;c<e.length;c++){if(!d[c])continue;const[p,h]=d[c];if(p*m>0){const g=i-Math.abs(h-f);g>0&&(d[c][1]+=Math.sign(p)*g)}}}return d}const D=({doughnut:e,arcWidth:t,label:i,colorScheme:o,width:l,displayAllLabels:u,height:n,explode:a,id:r,animated:d,cornerRadius:s,padAngle:m,padRadius:f,arc:c,data:p})=>{const{outerRadius:h,innerRadius:g,labelWidth:P}=me(n,l,i,t,e),V=fe(p,g,h,s,m,f,a),q=i?he(p,h,i.props.height+4,s,m,f,u):[],b=pe(p,g,h,a);function C(v,R){const T=te(v.data.key.toString()),$=ae({data:p,colorScheme:o,point:v.data,index:R});return S(A.Fragment,{children:[q[R]&&y(M,{id:r,element:i,data:v,centroid:b,outerRadius:h,width:P,position:q[R]}),y(M,{element:c,id:`${r}-arc-${T}`,data:v,animated:d,arc:V,color:$})]},T)}return y(E,{children:p.map(C)})};D.defaultProps={animated:!0,colorScheme:"cybertron",innerRadius:0,cornerRadius:0,padAngle:0,padRadius:0,explode:!1,displayAllLabels:!1,arcWidth:.25,label:y(F,{}),arc:y(_,{})};try{D.displayName="PieArcSeries",D.__docgenInfo={description:"",displayName:"PieArcSeries",props:{id:{defaultValue:null,description:"Unique id for the series.",name:"id",required:!1,type:{name:"string"}},animated:{defaultValue:{value:"true"},description:"Animated set by the `PieArc` components.",name:"animated",required:!1,type:{name:"boolean"}},outerRadius:{defaultValue:null,description:"Outer radius set by the parent component.",name:"outerRadius",required:!1,type:{name:"number"}},innerRadius:{defaultValue:{value:"0"},description:"Inner radius set by the parent component.",name:"innerRadius",required:!1,type:{name:"number"}},padAngle:{defaultValue:{value:"0"},description:"Pad Angle between adjacent arcs, see https://github.com/d3/d3-shape#arc_padAngle",name:"padAngle",required:!1,type:{name:"number"}},padRadius:{defaultValue:{value:"0"},description:"Pad Radius between adjacent arcs, see https://github.com/d3/d3-shape#arc_padRadius",name:"padRadius",required:!1,type:{name:"number"}},cornerRadius:{defaultValue:{value:"0"},description:"Corner Radius of the arcs, see https://github.com/d3/d3-shape#arc_cornerRadius",name:"cornerRadius",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"Data set by the parent component.",name:"data",required:!1,type:{name:"ArcData[]"}},arcWidth:{defaultValue:{value:"0.25"},description:"Width of the arc",name:"arcWidth",required:!1,type:{name:"number"}},doughnut:{defaultValue:null,description:"Doughnut, render as a donut shape",name:"doughnut",required:!1,type:{name:"boolean"}},explode:{defaultValue:{value:"false"},description:"Explode: OuterRadius will be adjusted by the data property",name:"explode",required:!1,type:{name:"boolean"}},displayAllLabels:{defaultValue:{value:"false"},description:"Display all labels shows labels even if there is little space",name:"displayAllLabels",required:!1,type:{name:"boolean"}},label:{defaultValue:{value:"<PieArcLabel />"},description:"Label component",name:"label",required:!1,type:{name:"ReactElement<PieArcLabelProps, FC<Partial<PieArcLabelProps>>>"}},arc:{defaultValue:{value:"<PieArc />"},description:"Arc Component",name:"arc",required:!1,type:{name:"ReactElement<PieArcProps, FC<PieArcProps>>"}},colorScheme:{defaultValue:{value:"cybertron"},description:"Color scheme",name:"colorScheme",required:!1,type:{name:"ColorSchemeType"}},height:{defaultValue:null,description:"Height set by the parent component",name:"height",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"Width set by the parent component",name:"width",required:!1,type:{name:"number"}}}}}catch{}const L=({id:e,width:t,height:i,className:o,containerClassName:l,displayAllLabels:u,data:n=[],margins:a,series:r})=>{const d=j(e),s=A.useMemo(()=>{const f=ie().value(c=>Number(c.data));return r.props.explode||f.sort(null),f(n)},[n,r]),m=A.useCallback(({chartWidth:f,chartHeight:c})=>y(M,{element:r,id:d,data:s,height:c,width:f,displayAllLabels:u}),[u,s,d,r]);return y(X,{id:e,width:t,height:i,margins:a,containerClassName:l,xAxisVisible:!1,yAxisVisible:!1,center:!0,className:W(o),children:m})};L.defaultProps={margins:10,series:y(D,{})};try{L.displayName="PieChart",L.__docgenInfo={description:"",displayName:"PieChart",props:{data:{defaultValue:{value:"[]"},description:"Data the chart will receive to render.",name:"data",required:!1,type:{name:"ChartShallowDataShape<ChartDataTypes | [ChartDataTypes, ChartDataTypes]>[]"}},disabled:{defaultValue:null,description:"Whether the chart is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},displayAllLabels:{defaultValue:null,description:"Whether to display labels even if their value has a small display radius.",name:"displayAllLabels",required:!1,type:{name:"boolean"}},series:{defaultValue:{value:"<PieArcSeries />"},description:"The series component that renders the arc components.",name:"series",required:!1,type:{name:"ReactElement<PieArcSeriesProps, FC<Partial<PieArcSeriesProps>>>"}},id:{defaultValue:null,description:"Id of the chart.",name:"id",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"Width of the chart. If not provided will autosize.",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"Height of the chart. If not provided will autosize.",name:"height",required:!1,type:{name:"number"}},margins:{defaultValue:{value:"10"},description:"Margins for the chart.",name:"margins",required:!1,type:{name:"Margins"}},className:{defaultValue:null,description:"Classnames for the chart.",name:"className",required:!1,type:{name:"string"}},containerClassName:{defaultValue:null,description:"Classnames for the chart.",name:"containerClassName",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Additional css styles.",name:"style",required:!1,type:{name:"StyleHTMLAttributes<SVGSVGElement>"}},center:{defaultValue:null,description:"Center the chart. Used mainly internally.",name:"center",required:!1,type:{name:"boolean"}},centerX:{defaultValue:null,description:"Center chart on X Axis only. Used mainly internally.",name:"centerX",required:!1,type:{name:"boolean"}},centerY:{defaultValue:null,description:"Center chart on Y Axis only. Used mainly internally.",name:"centerY",required:!1,type:{name:"boolean"}}}}}catch{}export{L as P,D as a,F as b,_ as c};
