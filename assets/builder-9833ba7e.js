import{b as l}from"./chroma-699b8ba0.js";import{n as k}from"./RadialAxis-6c2bc59c.js";import{q as v}from"./quantile-a1f83f78.js";function p(t,e){return v(t,.5,e)}function g(t,e){if(l.isInstance(t))if(e.greater(1e6)){const o=e.divide(1e6);return t.divide(o).toJSNumber()}else return t.toJSNumber();else return t}function m(t){return l.isInstance(t)?k(t):t}function h(t){let e=l.one;for(const o of t){const a=x(o.data);a.greater(e)&&(e=a)}return e}function x(t){let e=l.one;for(const o of t)if(l.isInstance(o.data)){const a=o.data;a.greater(e)&&(e=a)}return e}function $(t,e=!1,o="vertical"){let a=[];const c=h(t),f=o==="vertical";for(const n of t)for(const i of n.data){const d=m(n.key);let r=a.findIndex(I=>{const y=I.key;return y instanceof Date&&d instanceof Date?y.getTime()===d.getTime():y===d});r===-1&&(a.push({key:d,metadata:n.metadata,data:[]}),r=a.length-1);const s=g(f?i.key:i.data,c),u=g(f?i.data:i.key,c);a[r].data.push({key:d,value:m(i.data),metadata:i.metadata,id:n.id,x:s,x0:f?s:0,x1:s,y:u,y0:f?0:u,y1:u})}return e&&(a=a.sort((n,i)=>{const d=p(n.data,s=>s.y),r=p(i.data,s=>s.y);return d<r?1:-1})),a}function T(t,e){if(l.isInstance(t)&&l.isInstance(e))return t.add(e);if(t instanceof Date&&typeof e=="number")return new Date(t.valueOf()+e);if(typeof t=="number"&&typeof e=="number")return t+e;throw new Error("Invalid types to addToChartTypes")}function w(t,e="vertical",o=void 0){const a=[],c=x(t),f=e==="vertical";for(const n of t){const i=Array.isArray(n.data);let d=n.key;o&&(d=T(n.key,o));const r={k0:g(n.key,c),k1:g(d,c),v0:g(i?n.data[0]:0,c),v1:g(i?n.data[1]:n.data,c)},s=f?"k":"v",u=f?"v":"k";a.push({key:m(r.k0),value:m(r.v1),metadata:n.metadata,id:n.id,x:r[`${s}1`],x0:r[`${s}0`],x1:r[`${s}1`],y:r[`${u}1`],y0:r[`${u}0`],y1:r[`${u}1`]})}return a}export{w as a,$ as b,m as c,h as g,g as n};
